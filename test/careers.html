<div class="location-search-container">
  <h2>Find Our Locations</h2>

  <div class="search-input-wrapper">
    <input
      type="text"
      id="location-search"
      role="combobox"
      aria-autocomplete="list"
      aria-controls="search-dropdown"
      aria-expanded="false"
      aria-label="Search for Mia Aesthetics locations by city, state, or zip code"
      placeholder="Search by city, state, or zip code..."
      autocomplete="off"
    />
    <div class="search-icon">üîç</div>
    <div id="loading-spinner" class="loading-spinner" style="display: none">
      <div class="spinner"></div>
    </div>
  </div>

  <div id="search-dropdown" class="search-dropdown" role="listbox" aria-label="Search results">
    <!-- Results will appear here -->
  </div>
</div>

<style>
  .location-search-container {
    max-width: 600px;
    margin: 2rem auto;
    padding: 1rem;
    position: relative;
  }

  .location-search-container h2 {
    text-align: center;
    margin-bottom: 2rem;
    color: #1b1b1b;
    font-weight: 600;
  }

  .search-input-wrapper {
    position: relative;
    margin-bottom: 1rem;
  }

  #location-search {
    width: 100%;
    padding: 1rem 3rem 1rem 1.5rem;
    font-size: 1.1rem;
    border: 2px solid #e0e0e0;
    border-radius: 50px;
    outline: none;
    transition: all 0.3s ease;
    box-sizing: border-box;
  }

  #location-search:focus {
    border-color: #c8b273;
    box-shadow: 0 0 0 3px rgba(200, 178, 115, 0.1);
  }

  .search-icon {
    position: absolute;
    right: 1.5rem;
    top: 50%;
    transform: translateY(-50%);
    color: #999;
    font-size: 1.2rem;
    pointer-events: none;
  }

  .loading-spinner {
    position: absolute;
    right: 1.5rem;
    top: 50%;
    transform: translateY(-50%);
  }

  .spinner {
    width: 20px;
    height: 20px;
    border: 2px solid #e0e0e0;
    border-top: 2px solid #c8b273;
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% {
      transform: rotate(0deg);
    }
    100% {
      transform: rotate(360deg);
    }
  }

  /* Loading skeleton styles */
  .loading-skeleton {
    display: none;
    padding: 0;
  }

  .skeleton-item {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #f0f0f0;
    animation: pulse 1.5s ease-in-out infinite;
  }

  .skeleton-item:last-child {
    border-bottom: none;
  }

  .skeleton-title {
    height: 1.2rem;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    border-radius: 4px;
    margin-bottom: 0.5rem;
    width: 70%;
    animation: shimmer 1.5s infinite;
  }

  .skeleton-address {
    height: 0.9rem;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    border-radius: 4px;
    margin-bottom: 0.25rem;
    width: 85%;
    animation: shimmer 1.5s infinite;
  }

  .skeleton-distance {
    height: 0.8rem;
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    border-radius: 4px;
    width: 45%;
    animation: shimmer 1.5s infinite;
  }

  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.7;
    }
  }

  .search-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #e0e0e0;
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
    max-height: 400px;
    overflow-y: auto;
    z-index: 1000;
    display: none;
  }

  .dropdown-item {
    padding: 1rem 1.5rem;
    border-bottom: 1px solid #f0f0f0;
    cursor: pointer;
    transition: background-color 0.2s ease;
  }

  .dropdown-item:last-child {
    border-bottom: none;
  }

  .dropdown-item:hover,
  .dropdown-item.highlighted {
    background-color: #f8f9fa;
  }

  .dropdown-item h4 {
    margin: 0 0 0.25rem 0;
    color: #1b1b1b;
    font-size: 1rem;
    font-weight: 600;
  }

  .dropdown-item .location-address {
    color: #666;
    font-size: 0.9rem;
    margin-bottom: 0.25rem;
  }

  .dropdown-item .location-distance {
    color: #c8b273;
    font-size: 0.85rem;
    font-weight: 500;
  }

  .dropdown-item .location-phone {
    color: #c8b273;
    font-size: 0.85rem;
    text-decoration: none;
    font-weight: 500;
  }

  .no-results {
    padding: 1.5rem;
    text-align: center;
    color: #666;
    font-style: italic;
  }

  /* Google Places Autocomplete styling */
  .pac-container {
    border-radius: 12px !important;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15) !important;
    border: 1px solid #e0e0e0 !important;
    margin-top: 5px !important;
  }

  .pac-item {
    padding: 1rem 1.5rem !important;
    border-bottom: 1px solid #f0f0f0 !important;
    cursor: pointer !important;
  }

  .pac-item:hover {
    background-color: #f8f9fa !important;
  }

  .pac-item-selected {
    background-color: #f8f9fa !important;
  }

  .pac-matched {
    font-weight: 600 !important;
    color: #c8b273 !important;
  }

  /* Responsive design */
  @media (max-width: 768px) {
    .location-search-container {
      margin: 1rem;
      padding: 0.5rem;
    }

    .location-search-container h2 {
      font-size: 1.5rem;
    }

    #location-search {
      font-size: 1rem;
      padding: 0.875rem 2.5rem 0.875rem 1.25rem;
    }
  }
</style>

<!-- Load Google Maps API with Places library -->
<script
  async
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAiXSTjbyqjv_b9yGrxVyXYRmZQZ4GXBJ4&libraries=places&callback=initGoogleMaps"
></script>

<script>
  // Global variables
  let locations = [];
  let autocomplete;
  let userLocation = null;
  let currentResults = [];
  let currentHighlightIndex = -1;

  // Search configuration
  const SEARCH_CONFIG = {
    MAX_DISTANCE_MILES: 100, // Reasonable driving distance
    MAX_RESULTS: 3, // Show only 3 closest when no exact match
    MIN_SEARCH_LENGTH: 2, // Minimum characters to trigger search
    DEBOUNCE_DELAY: 300, // Reduced for better UX
  };

  // Cache geocoding results to reduce API calls
  const geocodeCache = new Map();
  const CACHE_DURATION = 1000 * 60 * 60; // 1 hour

  // DOM elements
  const searchInput = document.getElementById('location-search');
  const searchDropdown = document.getElementById('search-dropdown');
  const loadingSpinner = document.getElementById('loading-spinner');
  const searchIcon = document.querySelector('.search-icon');

  // Google Maps callback function
  window.initGoogleMaps = function () {
    initializeAutocomplete();
  };

  // Initialize when page loads
  document.addEventListener('DOMContentLoaded', function () {
    loadLocations();
    // initializeAutocomplete will be called by Google Maps callback
  });

  // Load locations from WordPress API
  async function loadLocations() {
    try {
      const response = await fetch('/wp-json/wp/v2/location?per_page=100&parent=0&_fields=id,title,link,acf');
      if (!response.ok) throw new Error('Failed to load locations');

      const data = await response.json();
      locations = data.map((location) => ({
        id: location.id,
        title: location.title.rendered,
        url: location.link,
        acf: location.acf || {},
        coordinates: getCoordinates(location.acf),
        distance: null,
      }));

      console.log(`Loaded ${locations.length} parent locations`);
      console.log(`Locations with coordinates: ${locations.filter((l) => l.coordinates).length}`);
    } catch (error) {
      console.error('Error loading locations:', error);
    }
  }

  // Extract coordinates from Google Map ACF field
  function getCoordinates(acf) {
    if (!acf || !acf.location_map) return null;

    const locationMap = acf.location_map;
    if (locationMap.lat && locationMap.lng) {
      return {
        lat: parseFloat(locationMap.lat),
        lng: parseFloat(locationMap.lng),
      };
    }
    return null;
  }

  // Initialize search functionality
  function initializeAutocomplete() {
    try {
      if (typeof google === 'undefined' || !google.maps) {
        console.error('Google Maps API not loaded');
        return;
      }

      // Initialize geocoder for converting addresses to coordinates
      window.geocoder = new google.maps.Geocoder();

      // Handle text input for both location matches and geocoding
      searchInput.addEventListener('input', debouncedSearch);

      // Add keyboard navigation
      searchInput.addEventListener('keydown', handleKeyNavigation);

      console.log('Google Maps Geocoder initialized successfully');
    } catch (error) {
      console.error('Error initializing Google Maps:', error);
    }
  }

  // Improved debounce function
  function debounce(func, wait) {
    let timeout;
    return function executedFunction(...args) {
      const later = () => {
        clearTimeout(timeout);
        func(...args);
      };
      clearTimeout(timeout);
      timeout = setTimeout(later, wait);
    };
  }

  // Simplified search function
  function handleSearch() {
    const query = searchInput.value ? searchInput.value.trim().toLowerCase() : '';

    if (query.length < SEARCH_CONFIG.MIN_SEARCH_LENGTH) {
      hideDropdown();
      return;
    }

    // Check for exact city/location matches first
    const exactMatches = findExactMatches(query);

    if (exactMatches.length > 0) {
      // Show exact matches and geocode to add distances
      geocodeAndShowResults(query, exactMatches, true);
    } else {
      // No exact matches - geocode and show closest locations
      geocodeAndShowResults(query, [], false);
    }
  }

  function findExactMatches(query) {
    return locations.filter((location) => {
      const locationMap = location.acf.location_map;
      if (!locationMap) return false;

      // Check various fields for matches
      const searchFields = [location.title, locationMap.city, locationMap.state, locationMap.state_short]
        .filter(Boolean)
        .map((field) => field.toLowerCase());

      return searchFields.some((field) => field.includes(query));
    });
  }

  // Create debounced search function
  const debouncedSearch = debounce(handleSearch, SEARCH_CONFIG.DEBOUNCE_DELAY);

  // Simplified geocoding function with caching
  function geocodeAndShowResults(query, exactMatches, hasExactMatches) {
    if (!window.geocoder) return;

    // Check cache first
    const cacheKey = query.toLowerCase();
    const cached = geocodeCache.get(cacheKey);

    if (cached && Date.now() - cached.timestamp < CACHE_DURATION) {
      userLocation = cached.location;
      calculateDistances();
      displaySimplifiedResults(query, exactMatches, hasExactMatches);
      return;
    }

    showLoading();

    geocoder.geocode(
      {
        address: query + ', USA',
        componentRestrictions: { country: 'US' },
      },
      (results, status) => {
        if (status === 'OK' && results[0]) {
          userLocation = {
            lat: results[0].geometry.location.lat(),
            lng: results[0].geometry.location.lng(),
          };

          // Cache the result
          geocodeCache.set(cacheKey, {
            location: userLocation,
            timestamp: Date.now(),
          });

          // Calculate distances for all locations
          calculateDistances();

          // Display results using simplified logic
          displaySimplifiedResults(query, exactMatches, hasExactMatches);
        } else {
          hideLoading();
          searchDropdown.innerHTML = '<div class="no-results">No locations found</div>';
          showDropdown();
        }
      }
    );
  }

  // Simplified display function - ALWAYS show results
  function displaySimplifiedResults(searchQuery, exactMatches, hasExactMatches) {
    let resultsToShow = [];

    if (hasExactMatches) {
      // Show exact matches first, then add closest alternatives
      const exactResults = exactMatches.map((loc) => ({ ...loc, isExactMatch: true }));

      // Get closest alternatives (excluding exact matches)
      const alternatives = locations
        .filter((loc) => loc.coordinates && loc.distance !== null && !exactMatches.some((exact) => exact.id === loc.id))
        .sort((a, b) => (a.distance || Infinity) - (b.distance || Infinity))
        .slice(0, 2) // Show next 2 closest
        .map((loc) => ({ ...loc, isExactMatch: false }));

      resultsToShow = [...exactResults, ...alternatives];
    } else {
      // No exact matches - show closest 3 locations regardless of distance
      resultsToShow = locations
        .filter((loc) => loc.coordinates && loc.distance !== null)
        .sort((a, b) => (a.distance || Infinity) - (b.distance || Infinity))
        .slice(0, SEARCH_CONFIG.MAX_RESULTS)
        .map((loc) => ({ ...loc, isExactMatch: false }));
    }

    // This should rarely happen unless there are no locations with coordinates
    if (resultsToShow.length === 0) {
      searchDropdown.innerHTML = '<div class="no-results">No locations available</div>';
    } else {
      displayResultsWithDistance(resultsToShow, searchQuery, hasExactMatches ? 'exact' : 'nearby');
    }

    hideLoading();
    showDropdown();
  }

  // Calculate distances from user location to all locations
  function calculateDistances() {
    if (!userLocation) return;

    locations.forEach((location) => {
      if (location.coordinates) {
        location.distance = calculateDistance(
          userLocation.lat,
          userLocation.lng,
          location.coordinates.lat,
          location.coordinates.lng
        );
      }
    });
  }

  // Calculate distance between two points using Haversine formula
  function calculateDistance(lat1, lng1, lat2, lng2) {
    const R = 3959; // Earth's radius in miles
    const dLat = toRadians(lat2 - lat1);
    const dLng = toRadians(lng2 - lng1);

    const a =
      Math.sin(dLat / 2) * Math.sin(dLat / 2) +
      Math.cos(toRadians(lat1)) * Math.cos(toRadians(lat2)) * Math.sin(dLng / 2) * Math.sin(dLng / 2);

    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    return R * c;
  }

  function toRadians(degrees) {
    return degrees * (Math.PI / 180);
  }

  // Update the header to be more informative for far locations
  function displayResultsWithDistance(results, searchQuery, searchType = 'nearby') {
    currentResults = results;
    currentHighlightIndex = -1;

    // Create more helpful headers
    let headerHtml = '';
    if (searchType === 'exact') {
      headerHtml = `
        <div style="padding: 0.75rem 1.5rem; background: #f0f8ff; border-bottom: 1px solid #e0e0e0; font-size: 0.85rem; color: #666;">
          <span style="color: #c8b273;">‚òÖ</span> <strong>${escapeHtml(
            capitalizeFirstLetter(searchQuery)
          )}</strong> + closest alternatives
        </div>
      `;
    } else {
      // Check if all results are far away
      const closestDistance = results[0]?.distance || 0;
      const distanceNote = closestDistance > 100 ? ' (nearest options)' : '';

      headerHtml = `
        <div style="padding: 0.75rem 1.5rem; background: #f8f9fa; border-bottom: 1px solid #e0e0e0; font-size: 0.85rem; color: #666;">
          Closest locations to <strong>${escapeHtml(capitalizeFirstLetter(searchQuery))}</strong>${distanceNote}
        </div>
      `;
    }

    const html = results
      .map((location) => {
        const address = formatAddress(location.acf);
        const phone = location.acf.phone_number || '';

        // Show exact match indicator or alternative label
        let matchLabel = '';
        if (location.isExactMatch) {
          matchLabel = '<span style="color: #c8b273; font-size: 0.8rem; font-weight: 600;">‚òÖ Exact Match</span>';
        } else {
          // Check if there are exact matches in the results to show "Alternative" label
          const hasExactMatches = results.some((r) => r.isExactMatch);
          if (hasExactMatches) {
            matchLabel = '<span style="color: #666; font-size: 0.8rem;">Alternative</span>';
          }
        }

        // Format distance text consistently
        let distanceHtml = '';
        if (location.distance !== null) {
          const distanceText = `${location.distance.toFixed(1)} miles away`;
          distanceHtml = `<div class="location-distance">${distanceText}</div>`;
        }

        return `
          <div class="dropdown-item" role="option" data-location-id="${location.id}" aria-selected="false">
            <div style="display: flex; justify-content: space-between; align-items: start;">
              <h4>${escapeHtml(location.title)}</h4>
              ${matchLabel}
            </div>
            ${address ? `<div class="location-address">${escapeHtml(address)}</div>` : ''}
            ${distanceHtml}
            ${phone ? `<div class="location-phone">${escapeHtml(formatPhone(phone))}</div>` : ''}
          </div>
        `;
      })
      .join('');

    searchDropdown.innerHTML = headerHtml + html;
    showDropdown();

    // Add click listeners
    const items = searchDropdown.querySelectorAll('.dropdown-item');
    items.forEach((item, index) => {
      item.addEventListener('click', () => selectLocation(results[index]));
    });
  }

  // Navigate to selected location
  function selectLocation(location) {
    window.location.href = location.url;
  }

  // Format address from Google Map field
  function formatAddress(acf) {
    const locationMap = acf.location_map;
    if (!locationMap) return '';

    const parts = [];
    if (locationMap.street_number && locationMap.street_name) {
      parts.push(locationMap.street_number + ' ' + locationMap.street_name);
    }
    if (locationMap.city) parts.push(locationMap.city);
    if (locationMap.state_short) parts.push(locationMap.state_short);
    if (locationMap.post_code) parts.push(locationMap.post_code);

    return parts.join(', ');
  }

  // Format phone number
  function formatPhone(phone) {
    const cleaned = phone.replace(/\D/g, '');
    if (cleaned.length === 10) {
      return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(6)}`;
    }
    return phone;
  }

  // Escape HTML
  function escapeHtml(unsafe) {
    if (typeof unsafe !== 'string') return '';
    return unsafe
      .replace(/&/g, '&amp;')
      .replace(/</g, '&lt;')
      .replace(/>/g, '&gt;')
      .replace(/"/g, '&quot;')
      .replace(/'/g, '&#039;');
  }

  // Return the search query as the user typed it
  function capitalizeFirstLetter(string) {
    if (typeof string !== 'string' || string.length === 0) return '';
    return string;
  }

  // Create loading skeleton
  function createLoadingSkeleton() {
    return `
      <div class="loading-skeleton">
        <div class="skeleton-item">
          <div class="skeleton-title"></div>
          <div class="skeleton-address"></div>
          <div class="skeleton-distance"></div>
        </div>
        <div class="skeleton-item">
          <div class="skeleton-title"></div>
          <div class="skeleton-address"></div>
          <div class="skeleton-distance"></div>
        </div>
        <div class="skeleton-item">
          <div class="skeleton-title"></div>
          <div class="skeleton-address"></div>
          <div class="skeleton-distance"></div>
        </div>
      </div>
    `;
  }

  // UI functions
  function showLoading() {
    loadingSpinner.style.display = 'block';
    searchIcon.style.display = 'none';

    // Show loading skeleton in dropdown
    searchDropdown.innerHTML = createLoadingSkeleton();
    searchDropdown.querySelector('.loading-skeleton').style.display = 'block';
    showDropdown();
  }

  function hideLoading() {
    loadingSpinner.style.display = 'none';
    searchIcon.style.display = 'block';
  }

  function showDropdown() {
    searchDropdown.style.display = 'block';
    // Update ARIA attributes for screen readers
    searchInput.setAttribute('aria-expanded', 'true');
  }

  function hideDropdown() {
    searchDropdown.style.display = 'none';
    currentHighlightIndex = -1;
    // Update ARIA attributes for screen readers
    searchInput.setAttribute('aria-expanded', 'false');
  }

  // Keyboard navigation for accessibility
  function handleKeyNavigation(e) {
    const items = searchDropdown.querySelectorAll('.dropdown-item');

    if (items.length === 0) return;

    if (e.key === 'ArrowDown') {
      e.preventDefault();
      currentHighlightIndex = Math.min(currentHighlightIndex + 1, items.length - 1);
      updateHighlight(items);
    } else if (e.key === 'ArrowUp') {
      e.preventDefault();
      currentHighlightIndex = Math.max(currentHighlightIndex - 1, -1);
      updateHighlight(items);
    } else if (e.key === 'Enter' && currentHighlightIndex >= 0) {
      e.preventDefault();
      selectLocation(currentResults[currentHighlightIndex]);
    } else if (e.key === 'Escape') {
      hideDropdown();
      searchInput.blur();
    }
  }

  // Update visual highlight for keyboard navigation
  function updateHighlight(items) {
    items.forEach((item, index) => {
      if (index === currentHighlightIndex) {
        item.classList.add('highlighted');
        item.setAttribute('aria-selected', 'true');
        item.scrollIntoView({ block: 'nearest' });
        // Announce to screen readers
        searchInput.setAttribute('aria-activedescendant', item.getAttribute('data-location-id'));
      } else {
        item.classList.remove('highlighted');
        item.setAttribute('aria-selected', 'false');
      }
    });
  }

  // Hide dropdown when clicking outside
  document.addEventListener('click', function (e) {
    if (!searchInput.contains(e.target) && !searchDropdown.contains(e.target)) {
      hideDropdown();
    }
  });
</script>

<style>
  /* Careers Landing Page Styles */

  .careers-hero {
    position: relative;
    min-height: 70vh;
    display: flex;
    align-items: center;
    overflow: hidden;
  }

  .careers-hero__background {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1;
  }

  .careers-hero__image {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center;
  }

  .careers-hero__overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(27, 27, 27, 0.75) 0%, rgba(27, 27, 27, 0.45) 100%);
    z-index: 2;
  }

  .careers-hero .container {
    position: relative;
    z-index: 3;
  }

  .careers-hero__content {
    padding: 2rem 0;
    color: white;
  }

  .careers-hero__title {
    font-family: var(--font-heading);
    font-size: clamp(2.25rem, 5vw, 3.75rem);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 2rem;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
  }

  .careers-hero__text {
    margin-bottom: 2.5rem;
  }

  .careers-hero__text p {
    font-size: clamp(1.125rem, 2.5vw, 1.25rem);
    line-height: 1.6;
    margin-bottom: 0;
    font-weight: 400;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .careers-hero__cta {
    margin-top: 2.5rem;
  }

  .careers-content {
    padding: 4rem 0;
  }

  /* Responsive Design */
  @media (max-width: 991.98px) {
    .careers-hero {
      min-height: 60vh;
    }

    .careers-hero__content {
      padding: 1.5rem 0;
    }

    .careers-hero__title {
      margin-bottom: 1.5rem;
    }

    .careers-hero__text {
      margin-bottom: 2rem;
    }

    .careers-hero__cta {
      margin-top: 2rem;
    }
  }

  @media (max-width: 767.98px) {
    .careers-hero {
      min-height: 50vh;
    }

    .careers-hero__content {
      padding: 1rem 0;
      text-align: center;
    }

    .careers-hero__btn {
      padding: var(--btn-padding);
      width: 100%;
      max-width: 280px;
    }
  }

  /* Accessibility Improvements */
  @media (prefers-reduced-motion: reduce) {
    .careers-hero__btn {
      transition: none;
    }

    .careers-hero__btn:hover {
      transform: none;
    }
  }

  /* Print Styles */
  @media print {
    .careers-hero {
      min-height: auto;
      background: white;
      color: black;
    }

    .careers-hero__overlay,
    .careers-hero__background {
      display: none;
    }

    .careers-hero__title,
    .careers-hero__text p {
      color: black;
      text-shadow: none;
    }
  }

  /* Trusted Excellence Section Styles */
  .stats-section {
    padding: 5rem 0;
    background-color: #1b1b1b;
    color: #fff;
  }

  /* Shared Section Tagline Styles */
  .section-tagline {
    font-size: 1.1rem;
    font-weight: 500;
    color: var(--color-gold);
    text-transform: uppercase;
    letter-spacing: 2px;
    margin-bottom: 1rem;
  }

  .stats-heading h2,
  .stats-heading-title {
    font-size: clamp(2rem, 5vw, 4rem);
    font-weight: 700;
    color: #fff;
    line-height: 1.1;
    margin-bottom: 0;
    letter-spacing: -0.5px;
  }

  .stats-content p {
    font-size: clamp(1rem, 2vw, 1.125rem);
    color: rgba(255, 255, 255, 0.8);
    margin-bottom: 2rem;
    text-align: left;
  }

  .stat-line-gold {
    width: 3px;
    height: 100%;
    min-height: 80px;
    background-color: var(--color-gold);
  }

  /* Core Values Section Styles */
  .core-values-section {
    padding: 6rem 0;
    background: linear-gradient(135deg, #f8f9fa 0%, #ffffff 100%);
    position: relative;
    overflow: hidden;
  }

  .core-values-section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent 0%, var(--color-gold) 50%, transparent 100%);
  }

  .core-values__header {
    text-align: center;
    margin-bottom: 5rem;
    position: relative;
  }

  .core-values__title {
    font-size: clamp(2.5rem, 5vw, 4.5rem);
    font-weight: 700;
    color: #1b1b1b;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    letter-spacing: -1px;
  }

  .core-values__subtitle {
    font-size: 1.25rem;
    color: #666;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .values-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
    margin-top: 4rem;
  }

  .value-card {
    background: #ffffff;
    border-radius: 16px;
    padding: 3rem 2.5rem;
    text-align: center;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
    border: 1px solid rgba(200, 178, 115, 0.1);
  }

  .value-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--color-gold) 0%, #d4c284 100%);
    transform: scaleX(0);
    transition: transform 0.4s ease;
  }

  .value-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.15);
  }

  .value-card:hover::before {
    transform: scaleX(1);
  }

  .value-icon {
    width: 80px;
    height: 80px;
    margin: 0 auto 2rem;
    background: linear-gradient(135deg, var(--color-gold) 0%, #d4c284 100%);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    color: #1b1b1b;
    transition: all 0.3s ease;
    position: relative;
  }

  .value-icon::after {
    content: '';
    position: absolute;
    inset: -4px;
    border-radius: 50%;
    background: linear-gradient(135deg, var(--color-gold), #d4c284);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .value-card:hover .value-icon {
    transform: rotate(5deg) scale(1.1);
  }

  .value-card:hover .value-icon::after {
    opacity: 0.3;
  }

  .value-title {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1b1b1b;
    margin-bottom: 1.5rem;
    line-height: 1.3;
  }

  .value-description {
    font-size: 1rem;
    color: #666;
    line-height: 1.7;
    margin: 0;
  }

  /* Responsive Design */
  @media (max-width: 991.98px) {
    .core-values-section {
      padding: 4rem 0;
    }

    .core-values__header {
      margin-bottom: 3rem;
    }

    .values-grid {
      gap: 2rem;
      margin-top: 2rem;
    }

    .value-card {
      padding: 2.5rem 2rem;
    }
  }

  @media (max-width: 991.98px) {
    .values-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1.5rem;
    }
  }

  @media (max-width: 767.98px) {
    .values-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .value-card {
      padding: 2rem 1.5rem;
    }

    .value-icon {
      width: 70px;
      height: 70px;
      font-size: 1.75rem;
    }
  }

  /* Animation on scroll */
  .value-card {
    opacity: 0;
    transform: translateY(30px);
    transition: all 0.6s ease;
  }

  .value-card.animate-in {
    opacity: 1;
    transform: translateY(0);
  }

  /* MIA Foundation Parallax Section */
  .foundation-parallax {
    position: relative;
    min-height: 80vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background-attachment: fixed;
    background-position: center;
    background-repeat: no-repeat;
    background-size: cover;
    background-image: url('/wp-content/uploads/2024/mia-foundation-background.jpg');
  }

  .foundation-parallax::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, rgba(27, 27, 27, 0.8) 0%, rgba(27, 27, 27, 0.6) 100%);
    z-index: 1;
  }

  .foundation-parallax .container {
    position: relative;
    z-index: 2;
  }

  .foundation-content {
    text-align: center;
    color: white;
    max-width: 800px;
    margin: 0 auto;
    padding: 4rem 2rem;
  }

  .foundation-content h2 {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 700;
    margin-bottom: 2rem;
    line-height: 1.2;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    letter-spacing: -1px;
  }

  .foundation-content p {
    font-size: clamp(1.125rem, 2.5vw, 1.375rem);
    line-height: 1.7;
    margin-bottom: 3rem;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
    color: rgba(255, 255, 255, 0.95);
  }

  .foundation-cta {
    margin-top: 3rem;
  }

  /* Responsive adjustments for parallax */
  @media (max-width: 768px) {
    .foundation-parallax {
      min-height: 60vh;
      background-attachment: scroll;
    }

    .foundation-content {
      padding: 2rem 1rem;
    }

    .foundation-content h2 {
      margin-bottom: 1.5rem;
    }

    .foundation-content p {
      margin-bottom: 2rem;
    }

    .foundation-cta {
      margin-top: 2rem;
    }
  }

  /* Accessibility - disable parallax for users who prefer reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .foundation-parallax {
      background-attachment: scroll;
    }
  }

  /* Find Location Section */
  .find-location-section {
    padding: 6rem 0;
    background: #f8f9fa;
  }

  .find-location__header {
    text-align: center;
    margin-bottom: 4rem;
  }

  .find-location__title {
    font-size: clamp(2.5rem, 5vw, 4rem);
    font-weight: 700;
    color: #1b1b1b;
    margin-bottom: 1.5rem;
    letter-spacing: -1px;
  }

  .find-location__subtitle {
    font-size: 1.25rem;
    color: #666;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
    margin-bottom: 2.5rem;
  }

  /* Responsive */
  @media (max-width: 767.98px) {
    .find-location-section {
      padding: 4rem 0;
    }

    .locations-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .location-card {
      padding: 1.5rem;
    }
  }
</style>
<!-- Careers Landing Page HTML -->
<!-- This content is designed to be placed in a WordPress blank canvas template -->

<section class="careers-hero">
  <div class="careers-hero__background">
    <img
      src="/wp-content/uploads/2024/careers-team-hero.jpg"
      alt="MIA Aesthetics Team - Join Our Mission"
      class="careers-hero__image"
    />
    <div class="careers-hero__overlay"></div>
  </div>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-xl-7">
        <div class="careers-hero__content">
          <h1 class="careers-hero__title">Join Mia Aesthetics</h1>
          <div class="careers-hero__text">
            <p>
              At Mia Aesthetics, passion, and purpose meet to transform lives every day. We believe confidence is
              powerful ‚Äî and so are the people behind it. As a nationwide leader in plastic surgery and aesthetic care,
              we're on a mission to empower individuals through transformative experiences that enhance both inner and
              outer beauty.
            </p>
          </div>
          <div class="careers-hero__cta">
            <a href="#careers-application" class="mia-button" data-variant="hero"> Click to Apply </a>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Trusted Excellence Section -->
<section class="stats-section py-4 py-md-5">
  <div class="container">
    <!-- Top Content -->
    <div class="row mb-4 mb-md-5">
      <!-- Left Column: Tagline and Heading -->
      <div class="col-lg-6 mb-3 mb-lg-0">
        <div class="stats-heading">
          <p class="section-tagline mb-1 mb-md-2">Our Commitment</p>
          <h2 class="stats-heading-title">Why Work at Mia</h2>
        </div>
      </div>

      <!-- Right Column: Paragraph and Buttons -->
      <div class="col-lg-6">
        <div class="stats-content">
          <p class="mb-3 mb-md-4 fs-6">
            Whether you're in the clinic, behind the scenes, or leading operations, your work directly supports
            life-changing moments for our patients. If you're passionate about helping others, committed to delivering
            outstanding care, and ready to grow with a purpose-driven organization, we‚Äôd love to meet you.
          </p>
          <div class="d-flex">
            <a href="/locations/" class="mia-button me-3" data-variant="black" role="button">Our Locations</a>
            <a href="/plastic-surgeons/" class="mia-button" data-variant="black" role="button">Our Surgeons</a>
          </div>
        </div>
      </div>
    </div>

    <!-- Stats Row -->
    <div class="row row-cols-2 row-cols-md-4 g-4 mt-4 mt-md-5">
      <!-- Stat Item 1: Founded Year -->
      <div class="col">
        <div class="position-relative ps-3 ps-md-4 mb-4">
          <div class="position-absolute start-0 top-0 stat-line-gold"></div>
          <h3 class="display-5 fw-bold text-white mb-2 lh-1" data-count="2018">0</h3>
          <p class="text-white opacity-75 mb-0 fs-6">Year Founded</p>
        </div>
      </div>

      <!-- Stat Item 2: Number of Surgeons -->
      <div class="col">
        <div class="position-relative ps-3 ps-md-4 mb-4">
          <div class="position-absolute start-0 top-0 stat-line-gold"></div>
          <h3 class="display-5 fw-bold text-white mb-2 lh-1" data-count="25">0</h3>
          <p class="text-white opacity-75 mb-0 fs-6">Expert Surgeons</p>
        </div>
      </div>

      <!-- Stat Item 3: Number of Locations -->
      <div class="col">
        <div class="position-relative ps-3 ps-md-4 mb-4">
          <div class="position-absolute start-0 top-0 stat-line-gold"></div>
          <h3 class="display-5 fw-bold text-white mb-2 lh-1" data-count="15">0</h3>
          <p class="text-white opacity-75 mb-0 fs-6">Clinic Locations</p>
        </div>
      </div>

      <!-- Stat Item 4: Total Patients -->
      <div class="col">
        <div class="position-relative ps-3 ps-md-4 mb-4">
          <div class="position-absolute start-0 top-0 stat-line-gold"></div>
          <h3 class="display-5 fw-bold text-white mb-2 lh-1" data-count="150" data-suffix=",000 +">0</h3>
          <p class="text-white opacity-75 mb-0 fs-6">Satisfied Patients</p>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Core Values Section -->
<section class="core-values-section">
  <div class="container">
    <div class="core-values__header">
      <p class="section-tagline">What Drives Us</p>
      <h2 class="core-values__title">Our Core Values</h2>
      <p class="core-values__subtitle">
        These fundamental principles guide everything we do and shape the exceptional experience we create for both our
        team and our patients.
      </p>
    </div>

    <div class="values-grid">
      <!-- Value 1: Patients First -->
      <div class="value-card" data-value="1">
        <div class="value-icon">‚ù§Ô∏è</div>
        <h3 class="value-title">Patients First</h3>
        <p class="value-description">
          We are committed to the highest quality of patient care. We understand our patients and support them in their
          journey to achieve their dreams.
        </p>
      </div>

      <!-- Value 2: Execute With Purpose -->
      <div class="value-card" data-value="2">
        <div class="value-icon">üí°</div>
        <h3 class="value-title">Execute With Purpose</h3>
        <p class="value-description">
          We are purposeful in everything we do by demonstrating enthusiasm, best intentions, and commitment to
          delivering results.
        </p>
      </div>

      <!-- Value 3: Respect For Others -->
      <div class="value-card" data-value="3">
        <div class="value-icon">ü§ù</div>
        <h3 class="value-title">Respect For Others</h3>
        <p class="value-description">
          We value and drive mutual respect for our customers, partners and teammates. In doing so, we benefit from an
          agreeable work environment and increased job satisfaction.
        </p>
      </div>

      <!-- Value 4: Collaborate Openly -->
      <div class="value-card" data-value="4">
        <div class="value-icon">üß©</div>
        <h3 class="value-title">Collaborate Openly</h3>
        <p class="value-description">
          When we work together, we bring new ideas forward, create solutions and learn from each other.
        </p>
      </div>
    </div>
  </div>
</section>

<!-- MIA Foundation Parallax Section -->
<section class="foundation-parallax">
  <div class="container">
    <div class="foundation-content">
      <h2>MIA Aesthetics Foundation</h2>
      <p>
        We are proud to give back through the Mia Aesthetics Foundation, a non-profit organization. Our talented
        surgical team provides reconstructive plastic surgery to those who live in underserved communities. The Mia
        Foundation teams up with like-minded partners across the globe who share our mission and values. Click below to
        learn more about how the Mia Foundation continues to help those in need.
      </p>
      <div class="foundation-cta">
        <a href="/mia-foundation/" class="mia-button" data-variant="gold">Learn More</a>
      </div>
    </div>
  </div>
</section>

<!-- Find Location Section -->
<section class="find-location-section">
  <div class="container">
    <div class="find-location__header">
      <p class="section-tagline">Where We Are</p>
      <h2 class="find-location__title">Find a Location</h2>
      <p class="find-location__subtitle">
        Discover our state-of-the-art facilities nationwide. Each location offers the same exceptional standards of care
        and expertise you can trust.
      </p>
    </div>

    <div style="text-align: center; margin-bottom: 3rem">
      <a href="/careers/search.html" class="mia-button" data-variant="gold">Search Locations & Surgeons</a>
    </div>

    <!-- View All Locations Button -->
    <div class="text-center mt-4" style="margin-top: 3rem">
      <a href="/locations/" class="mia-button" data-variant="gold-outline">View All Locations</a>
    </div>
  </div>
</section>

<!-- Additional content sections can be added below -->
<div class="careers-content">
  <div class="container">
    <!-- Future content will go here -->
  </div>
</div>

<script>
  // Stats Counter Animation
  document.addEventListener('DOMContentLoaded', function () {
    const statsCounters = document.querySelectorAll('[data-count]');

    // Counter animation function
    function animateCounter(element, targetValue, suffix = '') {
      const startValue = 0;
      const duration = 2000; // 2 seconds
      const startTime = performance.now();

      function updateCounter(currentTime) {
        const elapsed = currentTime - startTime;
        const progress = Math.min(elapsed / duration, 1);

        // Easing function for smooth animation
        const easeOutCubic = 1 - Math.pow(1 - progress, 3);
        const currentValue = Math.floor(startValue + (targetValue - startValue) * easeOutCubic);

        // Format the number based on its value
        let displayValue;
        if (targetValue >= 2000 && targetValue < 3000) {
          // Years (like 2018)
          displayValue = currentValue.toString();
        } else if (targetValue >= 100) {
          // Large numbers like 150 (for 150,000+)
          displayValue = currentValue.toString();
        } else {
          // Regular numbers
          displayValue = currentValue.toString();
        }

        element.textContent = displayValue + suffix;

        if (progress < 1) {
          requestAnimationFrame(updateCounter);
        }
      }

      requestAnimationFrame(updateCounter);
    }

    // Intersection Observer to trigger animations when in view
    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            const element = entry.target;
            const targetValue = parseInt(element.getAttribute('data-count'));
            const suffix = element.getAttribute('data-suffix') || '';

            // Start the animation
            animateCounter(element, targetValue, suffix);

            // Stop observing this element
            observer.unobserve(element);
          }
        });
      },
      {
        threshold: 0.5,
        rootMargin: '0px 0px -50px 0px',
      }
    );

    // Observe all counter elements
    statsCounters.forEach((counter) => {
      observer.observe(counter);
    });
  });

  // Core Values Animation
  document.addEventListener('DOMContentLoaded', function () {
    const valueCards = document.querySelectorAll('.value-card');

    const valuesObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry, index) => {
          if (entry.isIntersecting) {
            // Add staggered animation delay
            setTimeout(() => {
              entry.target.classList.add('animate-in');
            }, index * 150); // 150ms delay between each card

            valuesObserver.unobserve(entry.target);
          }
        });
      },
      {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px',
      }
    );

    valueCards.forEach((card) => {
      valuesObserver.observe(card);
    });
  });
</script>
